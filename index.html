<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBk3DRC-cinlVOJPUIklHymTCsEx1DAWAk&callback=initMap"></script>
  </head>
  <body>
    <div id="map" style="height: 500px"></div>
  </body>
  <!-- Add this code inside the <head> tag -->
  <script>
    function initMap() {
      var map = new google.maps.Map(document.getElementById("map"), {
        zoom: 7,
        center: { lat: 20.593683, lng: 78.962883 },
      });

      const markers = [
        {
          coords: { lat: 18.52043, lng: 73.856743 },
          iconImage:
            "https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png",
          content: `<h1>city pune</h1>`,
        },
        { coords: { lat: 19.075983, lng: 72.877655 },content: `<h1>city Mumbai</h1>`, },

        { coords: { lat: 12.971599, lng: 77.594566 } },
      ];

      markers.map((marker)=>{
        addMarkers(marker)

        const newMarker = new google.maps.Marker({
      coords: marker.coords,
      map,
      title: marker.title,
    });

    // add click event listener to the marker to display a popup window with the marker information
    newMarker.addListener("click", () => {
      const infoWindow = new google.maps.InfoWindow({
        content: `<h3>${marker.title}</h3><p>${marker.content}</p>`,
      });
      infoWindow.open(map, newMarker);
    });
        
      })
      //   markers.forEach((marker) => {
      //     const newMarker = new google.maps.Marker({
      //       position: { lat: marker.lat, lng: marker.lng },
      //       map,
      //       title: marker.title,
      //     });

      //     newMarker.addListener("click", () => {
      //       const infoWindow = new google.maps.InfoWindow({
      //         content: `<h3>${marker.title}</h3><p>${marker.description}</p>`,
      //       });
      //       infoWindow.open(map, newMarker);
      //     });
      //   });

      function addMarkers(props) {
        var marker = new google.maps.Marker({
          position: props.coords,
          map: map,
        });
        if (props.iconImage) {
          marker.setIcon(props.iconImage);
        }

        
        if (props.content) {
          var infoWindow = new google.maps.InfoWindow({
            content: props.content,
          });
        }
      }
    //   addMarkers();
    //   addMarkers();
    //   addMarkers();
      // addMarkers({ lat: 19.075983, lng: 72.877655})
    }

    function loadScript() {
      const script = document.createElement("script");
      script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyBk3DRC-cinlVOJPUIklHymTCsEx1DAWAk&callback=initMap`;
      script.defer = true;
      document.head.appendChild(script);
    }

    window.addEventListener("load", loadScript);
  </script>
</html>
